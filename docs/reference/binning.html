<!-- Generated by pkgdown: do not edit by hand -->
<!DOCTYPE html>
<html lang="en">
  <head>
  <meta charset="utf-8">
<meta http-equiv="X-UA-Compatible" content="IE=edge">
<meta name="viewport" content="width=device-width, initial-scale=1.0">

<title>Binning the Numeric Data — binning • dlookr</title>


<!-- jquery -->
<script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.4.1/jquery.min.js" integrity="sha256-CSXorXvZcTkaix6Yvo6HppcZGetbYMGWSFlBw8HfCJo=" crossorigin="anonymous"></script>
<!-- Bootstrap -->
<link href="https://cdnjs.cloudflare.com/ajax/libs/bootswatch/3.4.0/united/bootstrap.min.css" rel="stylesheet" crossorigin="anonymous" />


<script src="https://cdnjs.cloudflare.com/ajax/libs/twitter-bootstrap/3.4.1/js/bootstrap.min.js" integrity="sha256-nuL8/2cJ5NDSSwnKD8VqreErSWHtnEP9E7AySL+1ev4=" crossorigin="anonymous"></script>

<!-- bootstrap-toc -->
<link rel="stylesheet" href="../bootstrap-toc.css">
<script src="../bootstrap-toc.js"></script>

<!-- Font Awesome icons -->
<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.12.1/css/all.min.css" integrity="sha256-mmgLkCYLUQbXn0B1SRqzHar6dCnv9oZFPEC1g1cwlkk=" crossorigin="anonymous" />
<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.12.1/css/v4-shims.min.css" integrity="sha256-wZjR52fzng1pJHwx4aV2AO3yyTOXrcDW7jBpJtTwVxw=" crossorigin="anonymous" />

<!-- clipboard.js -->
<script src="https://cdnjs.cloudflare.com/ajax/libs/clipboard.js/2.0.6/clipboard.min.js" integrity="sha256-inc5kl9MA1hkeYUt+EC3BhlIgyp/2jDIyBLS6k3UxPI=" crossorigin="anonymous"></script>

<!-- headroom.js -->
<script src="https://cdnjs.cloudflare.com/ajax/libs/headroom/0.11.0/headroom.min.js" integrity="sha256-AsUX4SJE1+yuDu5+mAVzJbuYNPHj/WroHuZ8Ir/CkE0=" crossorigin="anonymous"></script>
<script src="https://cdnjs.cloudflare.com/ajax/libs/headroom/0.11.0/jQuery.headroom.min.js" integrity="sha256-ZX/yNShbjqsohH1k95liqY9Gd8uOiE1S4vZc+9KQ1K4=" crossorigin="anonymous"></script>

<!-- pkgdown -->
<link href="../pkgdown.css" rel="stylesheet">
<script src="../pkgdown.js"></script>




<meta property="og:title" content="Binning the Numeric Data — binning" />
<meta property="og:description" content="The binning() converts a numeric variable to a categorization variable." />




<!-- mathjax -->
<script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/MathJax.js" integrity="sha256-nvJJv9wWKEm88qvoQl9ekL2J+k/RWIsaSScxxlsrv8k=" crossorigin="anonymous"></script>
<script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/config/TeX-AMS-MML_HTMLorMML.js" integrity="sha256-84DKXVJXs0/F8OTMzX4UR909+jtl4G7SPypPavF+GfA=" crossorigin="anonymous"></script>

<!--[if lt IE 9]>
<script src="https://oss.maxcdn.com/html5shiv/3.7.3/html5shiv.min.js"></script>
<script src="https://oss.maxcdn.com/respond/1.4.2/respond.min.js"></script>
<![endif]-->



  </head>

  <body data-spy="scroll" data-target="#toc">
    <div class="container template-reference-topic">
      <header>
      <div class="navbar navbar-default navbar-fixed-top" role="navigation">
  <div class="container">
    <div class="navbar-header">
      <button type="button" class="navbar-toggle collapsed" data-toggle="collapse" data-target="#navbar" aria-expanded="false">
        <span class="sr-only">Toggle navigation</span>
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
      </button>
      <span class="navbar-brand">
        <a class="navbar-link" href="../index.html">dlookr</a>
        <span class="version label label-default" data-toggle="tooltip" data-placement="bottom" title="Released version">0.4.5</span>
      </span>
    </div>

    <div id="navbar" class="navbar-collapse collapse">
      <ul class="nav navbar-nav">
        <li>
  <a href="../articles/introduce.html">Introduce dlookr</a>
</li>
<li>
  <a href="../articles/diagonosis.html">Data Diagnosis</a>
</li>
<li>
  <a href="../articles/EDA.html">EDA</a>
</li>
<li>
  <a href="../articles/transformation.html">Data Transformation</a>
</li>
      </ul>
      <ul class="nav navbar-nav navbar-right">
        <li>
  <a href="../reference/index.html">Function reference</a>
</li>
<li>
  <a href="https://github.com/choonghyunryu/dlookr/">
    <span class="fas fa-github fa-lg"></span>
     
  </a>
</li>
      </ul>
      
    </div><!--/.nav-collapse -->
  </div><!--/.container -->
</div><!--/.navbar -->

      

      </header>

<div class="row">
  <div class="col-md-9 contents">
    <div class="page-header">
    <h1>Binning the Numeric Data</h1>
    <small class="dont-index">Source: <a href='https://github.com/choonghyunryu/dlookr/blob/master/R/binning.R'><code>R/binning.R</code></a></small>
    <div class="hidden name"><code>binning.Rd</code></div>
    </div>

    <div class="ref-description">
    <p>The binning() converts a numeric variable to a categorization variable.</p>
    </div>

    <pre class="usage"><span class='fu'>binning</span>(
  <span class='no'>x</span>,
  <span class='no'>nbins</span>,
  <span class='kw'>type</span> <span class='kw'>=</span> <span class='fu'><a href='https://rdrr.io/r/base/c.html'>c</a></span>(<span class='st'>"quantile"</span>, <span class='st'>"equal"</span>, <span class='st'>"pretty"</span>, <span class='st'>"kmeans"</span>, <span class='st'>"bclust"</span>),
  <span class='kw'>ordered</span> <span class='kw'>=</span> <span class='fl'>TRUE</span>,
  <span class='kw'>labels</span> <span class='kw'>=</span> <span class='kw'>NULL</span>,
  <span class='kw'>approxy.lab</span> <span class='kw'>=</span> <span class='fl'>TRUE</span>
)</pre>

    <h2 class="hasAnchor" id="arguments"><a class="anchor" href="#arguments"></a>Arguments</h2>
    <table class="ref-arguments">
    <colgroup><col class="name" /><col class="desc" /></colgroup>
    <tr>
      <th>x</th>
      <td><p>numeric. numeric vector for binning.</p></td>
    </tr>
    <tr>
      <th>nbins</th>
      <td><p>integer. number of intervals(bins). required. if missing, nclass.Sturges is used.</p></td>
    </tr>
    <tr>
      <th>type</th>
      <td><p>character. binning method. Choose from "quantile", "equal", "equal", "pretty", "kmeans" and "bclust".
The "quantile" sets breaks with quantiles of the same interval.
The "equal" sets breaks at the same interval.
The "pretty" chooses a number of breaks not necessarily equal
to nbins using base::pretty function.
The "kmeans" uses stats::kmeans function to generate the breaks.
The "bclust" uses e1071::bclust function to generate the breaks using bagged clustering.
"kmeans" and "bclust" was implemented by classInt::classIntervals() function.</p></td>
    </tr>
    <tr>
      <th>ordered</th>
      <td><p>logical. whether to build an ordered factor or not.</p></td>
    </tr>
    <tr>
      <th>labels</th>
      <td><p>character. the label names to use for each of the bins.</p></td>
    </tr>
    <tr>
      <th>approxy.lab</th>
      <td><p>logical. If TRUE, large number breaks are approximated to pretty numbers. 
If FALSE, the original breaks obtained by type are used.</p></td>
    </tr>
    </table>

    <h2 class="hasAnchor" id="value"><a class="anchor" href="#value"></a>Value</h2>

    <p>An object of bins class.
Attributes of bins class is as follows.</p><ul>
<li><p>type : binning type, "quantile", "equal", "pretty", "kmeans", "bclust".</p></li>
<li><p>breaks : the number of intervals into which x is to be cut.</p></li>
<li><p>levels : levels of binned value.</p></li>
<li><p>raw : raw data, numeric vector corresponding to x argument.</p></li>
</ul>

    <h2 class="hasAnchor" id="details"><a class="anchor" href="#details"></a>Details</h2>

    <p>This function is useful when used with the mutate/transmute
function of the dplyr package.</p>
    <h2 class="hasAnchor" id="-bins-class-attributes-information"><a class="anchor" href="#-bins-class-attributes-information"></a>"bins" class attributes information</h2>

    

<p>Attributes of the "bins" class that is as follows.</p>
<ul>
<li><p>class : "bins"</p></li>
<li><p>levels : levels of factor or ordered factor</p></li>
<li><p>type : binning method</p></li>
<li><p>breaks : breaks for binning</p></li>
<li><p>raw : raw data before binning</p></li>
</ul>

<p>See vignette("transformation") for an introduction to these concepts.</p>
    <h2 class="hasAnchor" id="see-also"><a class="anchor" href="#see-also"></a>See also</h2>

    <div class='dont-index'><p><code><a href='binning_by.html'>binning_by</a></code>, <code><a href='summary.bins.html'>print.bins</a></code>, <code><a href='summary.bins.html'>summary.bins</a></code>,
 <code><a href='plot.bins.html'>plot.bins</a></code>.</p></div>

    <h2 class="hasAnchor" id="examples"><a class="anchor" href="#examples"></a>Examples</h2>
    <pre class="examples"><div class='input'><span class='co'># Generate data for the example</span>
<span class='no'>heartfailure2</span> <span class='kw'>&lt;-</span> <span class='no'>heartfailure</span>
<span class='no'>heartfailure2</span>[<span class='fu'><a href='https://rdrr.io/r/base/sample.html'>sample</a></span>(<span class='fu'><a href='https://rdrr.io/r/base/seq.html'>seq</a></span>(<span class='fu'><a href='https://rdrr.io/r/base/nrow.html'>NROW</a></span>(<span class='no'>heartfailure2</span>)), <span class='fl'>20</span>), <span class='st'>"platelets"</span>] <span class='kw'>&lt;-</span> <span class='fl'>NA</span>

<span class='co'># Binning the carat variable. default type argument is "quantile"</span>
<span class='no'>bin</span> <span class='kw'>&lt;-</span> <span class='fu'>binning</span>(<span class='no'>heartfailure2</span>$<span class='no'>platelets</span>)
<span class='co'># Print bins class object</span>
<span class='no'>bin</span></div><div class='output co'>#&gt; binned type: quantile
#&gt; number of bins: 10
#&gt; x
#&gt; [2.51e+04,1.52e+05] (1.52e+05,1.96e+05] (1.96e+05,2.21e+05] (2.21e+05,2.36e+05] 
#&gt;                  28                  29                  29                  26 
#&gt;  (2.36e+05,2.6e+05]  (2.6e+05,2.65e+05] (2.65e+05,2.83e+05] (2.83e+05,3.19e+05] 
#&gt;                  28                  29                  27                  28 
#&gt; (3.19e+05,3.76e+05]  (3.76e+05,8.5e+05]                &lt;NA&gt; 
#&gt;                  27                  28                  20 </div><div class='input'>
<span class='co'># Summarise bins class object</span>
<span class='fu'><a href='https://rdrr.io/r/base/summary.html'>summary</a></span>(<span class='no'>bin</span>)</div><div class='output co'>#&gt;                 levels freq       rate
#&gt; 1  [2.51e+04,1.52e+05]   28 0.09364548
#&gt; 2  (1.52e+05,1.96e+05]   29 0.09698997
#&gt; 3  (1.96e+05,2.21e+05]   29 0.09698997
#&gt; 4  (2.21e+05,2.36e+05]   26 0.08695652
#&gt; 5   (2.36e+05,2.6e+05]   28 0.09364548
#&gt; 6   (2.6e+05,2.65e+05]   29 0.09698997
#&gt; 7  (2.65e+05,2.83e+05]   27 0.09030100
#&gt; 8  (2.83e+05,3.19e+05]   28 0.09364548
#&gt; 9  (3.19e+05,3.76e+05]   27 0.09030100
#&gt; 10  (3.76e+05,8.5e+05]   28 0.09364548
#&gt; 11                &lt;NA&gt;   20 0.06688963</div><div class='input'>
<span class='co'># Plot bins class object</span>
<span class='fu'><a href='https://rdrr.io/r/base/plot.html'>plot</a></span>(<span class='no'>bin</span>)</div><div class='img'><img src='binning-1.png' alt='' width='700' height='433' /></div><div class='input'>
<span class='co'># Using labels argument</span>
<span class='no'>bin</span> <span class='kw'>&lt;-</span> <span class='fu'>binning</span>(<span class='no'>heartfailure2</span>$<span class='no'>platelets</span>, <span class='kw'>nbins</span> <span class='kw'>=</span> <span class='fl'>4</span>,
              <span class='kw'>labels</span> <span class='kw'>=</span> <span class='fu'><a href='https://rdrr.io/r/base/c.html'>c</a></span>(<span class='st'>"LQ1"</span>, <span class='st'>"UQ1"</span>, <span class='st'>"LQ3"</span>, <span class='st'>"UQ3"</span>))
<span class='no'>bin</span></div><div class='output co'>#&gt; binned type: quantile
#&gt; number of bins: 4
#&gt; x
#&gt;  LQ1  UQ1  LQ3  UQ3 &lt;NA&gt; 
#&gt;   70   70   70   69   20 </div><div class='input'><span class='co'># Using another type argument</span>
<span class='no'>bin</span> <span class='kw'>&lt;-</span> <span class='fu'>binning</span>(<span class='no'>heartfailure2</span>$<span class='no'>platelets</span>, <span class='kw'>nbins</span> <span class='kw'>=</span> <span class='fl'>5</span>, <span class='kw'>type</span> <span class='kw'>=</span> <span class='st'>"equal"</span>)
<span class='no'>bin</span></div><div class='output co'>#&gt; binned type: equal
#&gt; number of bins: 5
#&gt; x
#&gt; [2.51e+04,1.9e+05] (1.9e+05,3.55e+05] (3.55e+05,5.2e+05] (5.2e+05,6.85e+05] 
#&gt;                 51                191                 32                  3 
#&gt; (6.85e+05,8.5e+05]               &lt;NA&gt; 
#&gt;                  2                 20 </div><div class='input'><span class='co'># bin &lt;- binning(heartfailure2$platelets, nbins = 5, type = "pretty")</span>
<span class='co'># bin</span>
<span class='co'># bin &lt;- binning(heartfailure2$platelets, nbins = 5, type = "kmeans")</span>
<span class='co'># bin</span>
<span class='co'># bin &lt;- binning(heartfailure2$platelets, nbins = 5, type = "bclust")</span>
<span class='co'># bin</span>

<span class='no'>x</span> <span class='kw'>&lt;-</span> <span class='fu'><a href='https://rdrr.io/r/base/sample.html'>sample</a></span>(<span class='fl'>1</span>:<span class='fl'>1000</span>, <span class='kw'>size</span> <span class='kw'>=</span> <span class='fl'>50</span>) * <span class='fl'>12345679</span>
<span class='no'>bin</span> <span class='kw'>&lt;-</span> <span class='fu'>binning</span>(<span class='no'>x</span>)
<span class='no'>bin</span></div><div class='output co'>#&gt; binned type: quantile
#&gt; number of bins: 7
#&gt; x
#&gt; [2.72e+08,2.22e+09] (2.22e+09,5.45e+09]  (5.45e+09,7.1e+09]  (7.1e+09,8.34e+09] 
#&gt;                   7                   7                   7                   8 
#&gt; (8.34e+09,9.86e+09] (9.86e+09,1.08e+10] (1.08e+10,1.23e+10] 
#&gt;                   7                   7                   7 </div><div class='input'><span class='no'>bin</span> <span class='kw'>&lt;-</span> <span class='fu'>binning</span>(<span class='no'>x</span>, <span class='kw'>approxy.lab</span> <span class='kw'>=</span> <span class='fl'>FALSE</span>)
<span class='no'>bin</span></div><div class='output co'>#&gt; binned type: quantile
#&gt; number of bins: 7
#&gt; x
#&gt;    [271604938,2216343325]   (2216343325,5453262781]   (5453262781,7097589646] 
#&gt;                         7                         7                         7 
#&gt;   (7097589646,8335096993]   (8335096993,9862433853]  (9862433853,10801881236] 
#&gt;                         8                         7                         7 
#&gt; (10801881236,12283950605] 
#&gt;                         7 </div><div class='input'>
<span class='co'># extract binned results</span>
<span class='fu'><a href='extract.bins.html'>extract</a></span>(<span class='no'>bin</span>)</div><div class='output co'>#&gt;  [1] (8335096993,9862433853]   (5453262781,7097589646]  
#&gt;  [3] (10801881236,12283950605] (5453262781,7097589646]  
#&gt;  [5] (10801881236,12283950605] [271604938,2216343325]   
#&gt;  [7] (2216343325,5453262781]   [271604938,2216343325]   
#&gt;  [9] (2216343325,5453262781]   (2216343325,5453262781]  
#&gt; [11] [271604938,2216343325]    (10801881236,12283950605]
#&gt; [13] (5453262781,7097589646]   (2216343325,5453262781]  
#&gt; [15] (2216343325,5453262781]   [271604938,2216343325]   
#&gt; [17] (7097589646,8335096993]   (10801881236,12283950605]
#&gt; [19] (10801881236,12283950605] (7097589646,8335096993]  
#&gt; [21] [271604938,2216343325]    (8335096993,9862433853]  
#&gt; [23] (9862433853,10801881236]  (5453262781,7097589646]  
#&gt; [25] (5453262781,7097589646]   (5453262781,7097589646]  
#&gt; [27] [271604938,2216343325]    (2216343325,5453262781]  
#&gt; [29] (7097589646,8335096993]   (8335096993,9862433853]  
#&gt; [31] (10801881236,12283950605] (9862433853,10801881236] 
#&gt; [33] (7097589646,8335096993]   (8335096993,9862433853]  
#&gt; [35] (9862433853,10801881236]  (9862433853,10801881236] 
#&gt; [37] (2216343325,5453262781]   [271604938,2216343325]   
#&gt; [39] (9862433853,10801881236]  (9862433853,10801881236] 
#&gt; [41] (7097589646,8335096993]   (9862433853,10801881236] 
#&gt; [43] (5453262781,7097589646]   (8335096993,9862433853]  
#&gt; [45] (7097589646,8335096993]   (8335096993,9862433853]  
#&gt; [47] (10801881236,12283950605] (7097589646,8335096993]  
#&gt; [49] (7097589646,8335096993]   (8335096993,9862433853]  
#&gt; 7 Levels: [271604938,2216343325] &lt; ... &lt; (10801881236,12283950605]</div><div class='input'>
<span class='co'># -------------------------</span>
<span class='co'># Using pipes &amp; dplyr</span>
<span class='co'># -------------------------</span>
<span class='fu'><a href='https://rdrr.io/r/base/library.html'>library</a></span>(<span class='no'>dplyr</span>)

<span class='co'># Compare binned frequency by death_event</span>
<span class='no'>heartfailure2</span> <span class='kw'>%&gt;%</span>
 <span class='fu'><a href='https://dplyr.tidyverse.org/reference/mutate.html'>mutate</a></span>(<span class='kw'>platelets_bin</span> <span class='kw'>=</span> <span class='fu'>binning</span>(<span class='no'>heartfailure2</span>$<span class='no'>platelets</span>) <span class='kw'>%&gt;%</span>
                     <span class='fu'><a href='extract.bins.html'>extract</a></span>()) <span class='kw'>%&gt;%</span>
 <span class='fu'><a href='https://dplyr.tidyverse.org/reference/group_by.html'>group_by</a></span>(<span class='no'>death_event</span>, <span class='no'>platelets_bin</span>) <span class='kw'>%&gt;%</span>
 <span class='fu'><a href='https://dplyr.tidyverse.org/reference/summarise.html'>summarise</a></span>(<span class='kw'>freq</span> <span class='kw'>=</span> <span class='fu'><a href='https://dplyr.tidyverse.org/reference/context.html'>n</a></span>()) <span class='kw'>%&gt;%</span>
 <span class='fu'><a href='https://dplyr.tidyverse.org/reference/arrange.html'>arrange</a></span>(<span class='fu'><a href='https://dplyr.tidyverse.org/reference/desc.html'>desc</a></span>(<span class='no'>freq</span>)) <span class='kw'>%&gt;%</span>
 <span class='fu'><a href='https://rdrr.io/r/utils/head.html'>head</a></span>(<span class='fl'>10</span>)</div><div class='output co'>#&gt; <span class='message'>`summarise()` has grouped output by 'death_event'. You can override using the `.groups` argument.</span></div><div class='output co'>#&gt; <span style='color: #949494;'># A tibble: 10 x 3</span><span>
#&gt; </span><span style='color: #949494;'># Groups:   death_event [1]</span><span>
#&gt;    death_event platelets_bin        freq
#&gt;    </span><span style='color: #949494;font-style: italic;'>&lt;fct&gt;</span><span>       </span><span style='color: #949494;font-style: italic;'>&lt;ord&gt;</span><span>               </span><span style='color: #949494;font-style: italic;'>&lt;int&gt;</span><span>
#&gt; </span><span style='color: #BCBCBC;'> 1</span><span> No          (2.65e+05,2.83e+05]    23
#&gt; </span><span style='color: #BCBCBC;'> 2</span><span> No          (2.36e+05,2.6e+05]     22
#&gt; </span><span style='color: #BCBCBC;'> 3</span><span> No          (2.21e+05,2.36e+05]    20
#&gt; </span><span style='color: #BCBCBC;'> 4</span><span> No          (1.96e+05,2.21e+05]    19
#&gt; </span><span style='color: #BCBCBC;'> 5</span><span> No          (2.83e+05,3.19e+05]    19
#&gt; </span><span style='color: #BCBCBC;'> 6</span><span> No          (1.52e+05,1.96e+05]    18
#&gt; </span><span style='color: #BCBCBC;'> 7</span><span> No          (3.19e+05,3.76e+05]    18
#&gt; </span><span style='color: #BCBCBC;'> 8</span><span> No          (3.76e+05,8.5e+05]     18
#&gt; </span><span style='color: #BCBCBC;'> 9</span><span> No          [2.51e+04,1.52e+05]    16
#&gt; </span><span style='color: #BCBCBC;'>10</span><span> No          (2.6e+05,2.65e+05]     16</div><div class='input'>
 <span class='co'># Compare binned frequency by death_event using Viz</span>
 <span class='no'>heartfailure2</span> <span class='kw'>%&gt;%</span>
   <span class='fu'><a href='https://dplyr.tidyverse.org/reference/mutate.html'>mutate</a></span>(<span class='kw'>platelets_bin</span> <span class='kw'>=</span> <span class='fu'>binning</span>(<span class='no'>heartfailure2</span>$<span class='no'>platelets</span>) <span class='kw'>%&gt;%</span>
           <span class='fu'><a href='extract.bins.html'>extract</a></span>()) <span class='kw'>%&gt;%</span>
   <span class='fu'><a href='target_by.data.frame.html'>target_by</a></span>(<span class='no'>death_event</span>) <span class='kw'>%&gt;%</span>
   <span class='fu'><a href='relate.html'>relate</a></span>(<span class='no'>platelets_bin</span>) <span class='kw'>%&gt;%</span>
   <span class='fu'><a href='https://rdrr.io/r/base/plot.html'>plot</a></span>()</div><div class='img'><img src='binning-2.png' alt='' width='700' height='433' /></div><div class='input'> 
</div></span></pre>
  </div>
  <div class="col-md-3 hidden-xs hidden-sm" id="pkgdown-sidebar">
    <nav id="toc" data-toggle="toc" class="sticky-top">
      <h2 data-toc-skip>Contents</h2>
    </nav>
  </div>
</div>


      <footer>
      <div class="copyright">
  <p>Developed by Choonghyun Ryu.</p>
</div>

<div class="pkgdown">
  <p>Site built with <a href="https://pkgdown.r-lib.org/">pkgdown</a> 1.5.1.</p>
</div>

      </footer>
   </div>

  


  </body>
</html>


